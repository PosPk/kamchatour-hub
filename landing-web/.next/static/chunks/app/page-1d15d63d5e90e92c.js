(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5746:function(e,t,a){Promise.resolve().then(a.bind(a,573))},7648:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var l=a(2972),r=a.n(l)},5775:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let l=a(7043);a(7437),a(2265);let r=l._(a(5602));function s(e,t){var a;let l={loading:e=>{let{error:t,isLoading:a,pastDelay:l}=e;return null}};"function"==typeof e&&(l.loader=e);let s={...l,...t};return(0,r.default)({...s,modules:null==(a=s.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1523:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let l=a(8993);function r(e){let{reason:t,children:a}=e;if("undefined"==typeof window)throw new l.BailoutToCSRError(t);return a}},5602:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let l=a(7437),r=a(2265),s=a(1523),n=a(49);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},c=function(e){let t={...o,...e},a=(0,r.lazy)(()=>t.loader().then(i)),c=t.loading;function d(e){let i=c?(0,l.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,l.jsxs)(l.Fragment,{children:["undefined"==typeof window?(0,l.jsx)(n.PreloadCss,{moduleIds:t.modules}):null,(0,l.jsx)(a,{...e})]}):(0,l.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,l.jsx)(a,{...e})});return(0,l.jsx)(r.Suspense,{fallback:i,children:o})}return d.displayName="LoadableComponent",d}},49:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return s}});let l=a(7437),r=a(544);function s(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let a=(0,r.getExpectedRequestStore)("next/dynamic css"),s=[];if(a.reactLoadableManifest&&t){let e=a.reactLoadableManifest;for(let a of t){if(!e[a])continue;let t=e[a].files.filter(e=>e.endsWith(".css"));s.push(...t)}}return 0===s.length?null:(0,l.jsx)(l.Fragment,{children:s.map(e=>(0,l.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:a.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},573:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var l=a(7437),r=a(7648),s=a(5775),n=a.n(s),i=a(2265);function o(e){let{href:t="/hub/safety"}=e,[a,r]=(0,i.useState)(null),[s,n]=(0,i.useState)(null),[o,c]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/graphics/kamchatka-path.txt",{cache:"no-store"});if(e.ok){let t=(await e.text()).trim();if(t&&t.startsWith("M")){n(t);return}}}catch(e){}try{{let e=localStorage.getItem("kam_button_url");e&&c(e)}let e=await fetch("/api/kam-button",{cache:"no-store"});if(e.ok){let t=await e.json();if(null==t?void 0:t.url){c(t.url);try{localStorage.setItem("kam_button_url",t.url)}catch(e){}return}}}catch(e){}try{var e;let t=await fetch("/data/kamchatka_outline.geojson",{cache:"no-store"}),a=await t.json(),l="FeatureCollection"===a.type?null===(e=a.features)||void 0===e?void 0:e[0]:a;r(l.geometry)}catch(e){}})()},[]);let d=(0,i.useMemo)(()=>{if(s)return s;if(!a)return"";let e=1/0,t=1/0,l=-1/0,r=-1/0,n="MultiPolygon"===a.type?a.coordinates:[a.coordinates];n.forEach(a=>a.forEach(a=>a.forEach(a=>{let[s,n]=a;s<e&&(e=s),s>l&&(l=s),n<t&&(t=n),n>r&&(r=n)})));let i=Math.max(1e-9,l-e),o=Math.max(1e-9,r-t),c=Math.min(480/i,580/o),d=(500-i*c)/2-e*c,u=(600-o*c)/2+r*c,h=(e,t)=>[d+e*c,u-t*c],m=[];return n.forEach(e=>e.forEach(e=>{let t=e.map(e=>{let[t,a]=e;return h(t,a)});if(t.length){m.push("M ".concat(t[0][0].toFixed(2)," ").concat(t[0][1].toFixed(2)));for(let e=1;e<t.length;e++)m.push("L ".concat(t[e][0].toFixed(2)," ").concat(t[e][1].toFixed(2)));m.push("Z")}})),m.join(" ")},[a]);return(0,l.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"group inline-block",children:(0,l.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black grid place-items-center map-button-glow",children:[o?(0,l.jsx)("img",{src:o,alt:"Камчатка",className:"kamchatka-button w-full h-auto"}):(0,l.jsx)("img",{src:"/graphics/kamchatka-button.svg",alt:"Камчатка",className:"kamchatka-button w-full h-auto",onError:e=>{e.currentTarget.style.display="none"}}),!o&&(0,l.jsx)("svg",{viewBox:"0 0 500 600",className:"w-full h-auto",children:(0,l.jsx)("path",{d:d||"M160,45 C150,65 145,85 140,105 C135,125 130,145 125,165 C120,185 125,205 135,225 C145,245 160,255 180,260 C200,265 220,260 240,250 C260,240 270,225 275,205 C280,185 275,165 270,145 C265,125 260,105 255,85 C250,65 240,50 220,45 C200,40 180,40 160,45 Z",className:"fill-black",stroke:"#FFD700",strokeWidth:"2",vectorEffect:"non-scaling-stroke"})})]})})}function c(e){let{onReady:t}=e,[a,r]=(0,i.useState)(null),[s,n]=(0,i.useState)(!1),[o,c]=(0,i.useState)(null),[d,u]=(0,i.useState)(null),[h,m]=(0,i.useState)(null),x=async e=>{var a;let l=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!l)return;let s=URL.createObjectURL(l);r(s);try{t(s)}catch(e){}c(null),n(!0);try{let e=new FormData;e.append("file",l),e.append("prefix","graphics/kamchatka-button");let a=await fetch("/api/upload",{method:"POST",body:e}),r=await a.json();if(!a.ok)throw Error((null==r?void 0:r.error)||"upload_failed");try{m(r.url),t(r.url)}catch(e){}}catch(e){c((null==e?void 0:e.message)||"Ошибка загрузки")}finally{n(!1)}};return(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)("label",{className:"text-xs text-white/60",children:"PNG силуэт Камчатки"}),(0,l.jsx)("input",{type:"file",accept:"image/png,image/svg+xml",onChange:x,className:"text-sm"}),s&&(0,l.jsx)("div",{className:"text-xs text-white/60",children:"Загрузка…"}),o&&(0,l.jsx)("div",{className:"text-xs text-red-400",children:o}),a&&(0,l.jsx)("div",{className:"rounded-xl border border-white/10 bg-black p-3",children:(0,l.jsx)("img",{src:a,alt:"Предпросмотр",className:"max-h-48 mx-auto"})}),h&&!s&&(0,l.jsx)("button",{onClick:async()=>{try{n(!0);let e=await fetch("/api/kam-button",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:h})}),t=await e.json();if(!e.ok)throw Error((null==t?void 0:t.error)||"save_failed");u(h);try{h&&localStorage.setItem("kam_button_url",h)}catch(e){}}catch(e){c((null==e?void 0:e.message)||"Ошибка сохранения")}finally{n(!1)}},className:"h-10 rounded-lg bg-premium-gold text-premium-black font-semibold",children:"Сохранить"}),d&&(0,l.jsx)("div",{className:"text-xs text-green-400",children:"Сохранено. Будет подставляться автоматически."})]})}function d(){let[e,t]=(0,i.useState)(null);if(null===e){try{let e=localStorage.getItem("kam_button_url");e&&t(e)}catch(e){}fetch("/api/kam-button",{cache:"no-store"}).then(e=>e.json()).then(e=>{if(null==e?void 0:e.url){t(e.url);try{localStorage.setItem("kam_button_url",e.url)}catch(e){}}}).catch(()=>{})}n()(()=>a.e(644).then(a.bind(a,3644)),{loadableGenerated:{webpack:()=>[3644]},ssr:!1});let s=n()(()=>a.e(336).then(a.bind(a,1336)),{loadableGenerated:{webpack:()=>[1336]},ssr:!1});return(0,l.jsxs)("main",{className:"min-h-screen bg-premium-black text-white",children:[(0,l.jsxs)("header",{className:"px-6 py-4 flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"h-9 w-9 rounded-lg bg-gradient-to-br from-premium-gold to-premium-ice"}),(0,l.jsx)("span",{className:"font-display text-xl tracking-tight",children:"Kamchatour Hub"})]}),(0,l.jsxs)("nav",{className:"hidden sm:flex gap-6 text-sm text-white/70",children:[(0,l.jsx)(r.default,{href:"/premium",className:"hover:text-white",children:"Commerce"}),(0,l.jsx)(r.default,{href:"/premium2",className:"hover:text-white",children:"Adventure"}),(0,l.jsx)(r.default,{href:"/partners",className:"hover:text-white",children:"Партнёры"}),(0,l.jsx)(r.default,{href:"/hub/stay",className:"hover:text-white",children:"Размещение"}),(0,l.jsx)(r.default,{href:"/search",className:"hover:text-white",children:"Поиск"})]})]}),(0,l.jsxs)("section",{className:"relative overflow-hidden rounded-3xl mx-6 mb-8",children:[(0,l.jsx)("div",{className:"absolute inset-0 -z-10",children:(0,l.jsx)("video",{className:"w-full h-[48vh] object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0,poster:"https://images.unsplash.com/photo-1520496938500-76fd098ad75a?q=80&w=1920&auto=format&fit=crop",children:(0,l.jsx)("source",{src:"https://cdn.coverr.co/videos/coverr-aurora-over-mountains-0157/1080p.mp4",type:"video/mp4"})})}),(0,l.jsx)("div",{className:"absolute inset-0 gradient-gold-aurora animate-aurora"}),(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"}),(0,l.jsxs)("div",{className:"absolute inset-0 p-8 grid content-end gap-4",children:[(0,l.jsx)("h1",{className:"font-display text-4xl sm:text-6xl font-black leading-tight",children:"Экосистема туризма Камчатки"}),(0,l.jsx)("p",{className:"max-w-2xl text-white/85",children:"Туры, партнёры, CRM, бронирование, безопасность, рефералы и экология — в едином центре."}),(0,l.jsxs)("form",{action:"/search",className:"flex gap-2 items-center",children:[(0,l.jsx)("input",{name:"q",placeholder:"Куда поедем? вулканы, океан, медведи…",className:"flex-1 h-12 rounded-xl px-4 text-slate-900"}),(0,l.jsx)("button",{className:"h-12 rounded-xl px-5 font-bold bg-premium-gold text-premium-black",children:"Искать"})]})]})]}),(0,l.jsxs)("section",{className:"px-6 py-6 grid gap-4",children:[(0,l.jsxs)("div",{className:"grid gap-1 text-center",children:[(0,l.jsx)("div",{className:"font-display text-3xl sm:text-5xl font-black leading-tight text-gold gold-glow",children:"Камчатка."}),(0,l.jsx)("div",{className:"font-display text-3xl sm:text-5xl font-black leading-tight text-gold gold-glow",children:"экосистема путешествий."})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h2",{className:"text-xl font-extrabold",children:"Кому это нужно"}),(0,l.jsx)("div",{className:"text-white/70 text-sm",children:"Выберите роль, чтобы продолжить"})]}),(0,l.jsx)("div",{className:"grid gap-4 grid-cols-2 sm:grid-cols-4",children:[{key:"tourist",label:"Турист",href:"/hub/tourist"},{key:"operator",label:"Туроператор",href:"/hub/operator"},{key:"guide",label:"Гид",href:"/hub/guide"},{key:"transfer",label:"Трансфер",href:"/hub/transfer"},{key:"stay",label:"Размещение",href:"/hub/stay"},{key:"souvenirs",label:"Сувениры",href:"/hub/souvenirs"},{key:"gear",label:"Прокат снаряжения",href:"/hub/gear"},{key:"cars",label:"Прокат авто",href:"/hub/cars"}].map(e=>(0,l.jsxs)(r.default,{href:e.href,className:"rounded-2xl bg-white/5 border border-white/10 p-5 hover:bg-white/10 transition",children:[(0,l.jsx)("div",{className:"text-lg font-extrabold",children:e.label}),(0,l.jsx)("div",{className:"text-sm text-white/70",children:"Персональные инструменты и витрины"})]},e.key))})]}),(0,l.jsxs)("section",{className:"px-6 py-6 grid gap-4 sm:grid-cols-3",children:[(0,l.jsxs)("div",{className:"rounded-2xl bg-white/5 border border-white/10 p-5 grid gap-4 sm:grid-cols-2 sm:items-start",children:[(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsx)("div",{className:"text-sm text-white/70",children:"SOS и безопасность"}),(0,l.jsxs)("div",{className:"grid gap-3",children:[(0,l.jsx)("a",{href:"#",className:"rounded-xl bg-premium-gold text-premium-black text-center py-3 font-bold",children:"SOS"}),(0,l.jsx)("a",{href:"#",className:"rounded-xl bg-white/10 text-center py-3 font-bold",children:"МЧС"}),(0,l.jsx)("a",{href:"#",className:"rounded-xl bg-white/10 text-center py-3 font-bold",children:"Сейсмика"})]}),(0,l.jsx)("div",{className:"text-white/70 text-xs",children:"Тестовый режим: интеграции в процессе"})]}),(0,l.jsx)("div",{className:"w-full h-72 rounded-2xl overflow-hidden border border-white/10 bg-black grid place-items-center cursor-pointer group",children:(0,l.jsx)("div",{className:"w-[70%] sm:w-[80%]",children:e?(0,l.jsx)("a",{href:"/hub/safety",target:"_blank",rel:"noopener noreferrer","aria-label":"Открыть карту Камчатки",children:(0,l.jsx)("img",{src:e,alt:"Кнопка Камчатки",className:"kamchatka-button mx-auto"})}):(0,l.jsx)(o,{href:"/hub/safety"})})}),(0,l.jsx)("div",{className:"sm:col-span-2",children:(0,l.jsx)(c,{onReady:e=>t(e)})})]}),(0,l.jsxs)("div",{className:"rounded-2xl bg-white/5 border border-white/10 p-5 grid gap-2",children:[(0,l.jsx)("div",{className:"text-sm text-white/70",children:"Экология"}),(0,l.jsx)("div",{className:"text-2xl font-black text-premium-gold",children:"Eco‑points: 0"}),(0,l.jsx)("div",{className:"text-white/70 text-sm",children:"Собирайте баллы за бережное поведение"})]})]}),(0,l.jsxs)("section",{className:"px-6 py-8 grid gap-4",children:[(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsx)("h2",{className:"text-xl font-extrabold",children:"Быстрые переходы"})}),(0,l.jsx)("div",{className:"grid gap-3 grid-cols-[repeat(auto-fill,minmax(160px,1fr))]",children:[{label:"Каталог туров",href:"/partners"},{label:"Поиск",href:"/search"},{label:"Витрина Commerce",href:"/premium"},{label:"Витрина Adventure",href:"/premium2"},{label:"Размещение",href:"/hub/stay"},{label:"Безопасность",href:"/hub/safety"},{label:"Рефералы и бусты",href:"/hub/operator"}].map(e=>(0,l.jsx)(r.default,{href:e.href,className:"text-center font-semibold border border-white/10 rounded-xl p-3 bg-white/5 hover:bg-white/10",children:e.label},e.label))})]}),(0,l.jsx)(s,{})]})}}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=5746)}),_N_E=e.O()}]);