(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[682],{5579:function(e,t,s){Promise.resolve().then(s.bind(s,1534))},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var l=s(2972),r=s.n(l)},1534:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var l=s(7437),r=s(2265),a=s(7648);function n(e){let t=new Date(e);return t.setHours(0,0,0,0),t}function i(e,t){let s=new Date(e);return s.setMonth(s.getMonth()+t),s}function o(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function c(e,t){return n(e).getTime()<n(t).getTime()}function d(e){let{monthDate:t,range:s,onPick:r,minDate:a}=e,i=t.getFullYear(),d=t.getMonth(),u=(new Date(i,d,1).getDay()+6)%7,m=new Date(i,d+1,0).getDate(),h=[];for(let e=0;e<u;e++)h.push(null);for(let e=1;e<=m;e++)h.push(new Date(i,d,e));for(;h.length%7!=0;)h.push(null);let x=e=>{var t;return s.start&&s.end&&(t=s.start,n(e).getTime()>n(t).getTime()||o(e,s.start))&&(c(e,s.end)||o(e,s.end))},g=e=>c(e,a);return(0,l.jsxs)("div",{className:"p-3",children:[(0,l.jsx)("div",{className:"text-center font-semibold mb-2",children:t.toLocaleString("ru-RU",{month:"long",year:"numeric"})}),(0,l.jsx)("div",{className:"grid grid-cols-7 gap-1 text-xs text-white/60 mb-1",children:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"].map(e=>(0,l.jsx)("div",{className:"h-7 grid place-items-center",children:e},e))}),(0,l.jsx)("div",{className:"grid grid-cols-7 gap-1",children:h.map((e,t)=>{if(!e)return(0,l.jsx)("div",{className:"h-9"},t);let a=s.start&&o(e,s.start),n=s.end&&o(e,s.end),i=s.start&&s.end&&x(e),c=g(e);return(0,l.jsx)("button",{disabled:c,onClick:()=>r(e),className:"h-9 rounded-md text-sm grid place-items-center\n                ".concat(c?"text-white/25 cursor-not-allowed":"hover:bg-white/10","\n                ").concat(i?"bg-premium-gold/20":"","\n                ").concat(a||n?"bg-premium-gold text-premium-black font-bold":""),children:e.getDate()},t)})})]})}function u(e){let{value:t,onChange:s,onClose:a,anchorRef:o}=e,u=n(new Date),[m,h]=(0,r.useState)(null),[x,g]=(0,r.useState)(()=>n(t.start||u)),p=(0,r.useRef)(null),b=(0,r.useMemo)(()=>t,[t]);(0,r.useEffect)(()=>{function e(e){let t=e.target;!p.current||p.current.contains(t)||(null==o?void 0:o.current)&&o.current.contains(t)||null==a||a()}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[a,o]);let f=e=>{if(!b.start||b.start&&b.end){s({start:e,end:null}),h(null);return}b.start&&!b.end&&(c(e,b.start)?s({start:e,end:b.start}):s({start:b.start,end:e}),h(null))};return(0,l.jsxs)("div",{ref:p,className:"absolute z-50 mt-2 rounded-2xl border border-white/10 bg-premium-black shadow-xl overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b border-white/10",children:[(0,l.jsx)("div",{className:"text-sm text-white/70",children:"Выберите даты"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>g(i(x,-1)),className:"h-8 w-8 grid place-items-center rounded-lg bg-white/10 hover:bg-white/15",children:"‹"}),(0,l.jsx)("button",{onClick:()=>g(i(x,1)),className:"h-8 w-8 grid place-items-center rounded-lg bg-white/10 hover:bg-white/15",children:"›"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[(0,l.jsx)(d,{monthDate:x,range:b,onPick:f,minDate:u}),(0,l.jsx)(d,{monthDate:i(x,1),range:b,onPick:f,minDate:u})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2 px-3 py-2 border-t border-white/10",children:[(0,l.jsx)("button",{onClick:()=>s({start:null,end:null}),className:"px-3 py-2 rounded-lg bg-white/10 hover:bg-white/15 text-sm",children:"Очистить"}),(0,l.jsxs)("div",{className:"text-sm text-white/70",children:[b.start?b.start.toLocaleDateString("ru-RU"):"—"," → ",b.end?b.end.toLocaleDateString("ru-RU"):"—"]}),(0,l.jsx)("button",{onClick:a,className:"px-3 py-2 rounded-lg bg-premium-gold text-premium-black font-semibold text-sm",children:"Готово"})]})]})}function m(e){let{value:t,onChange:s}=e,[a,n]=(0,r.useState)(!1),i=(0,r.useRef)(null);return(0,r.useEffect)(()=>{function e(e){i.current&&!i.current.contains(e.target)&&n(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,l.jsxs)("div",{className:"relative",ref:i,children:[(0,l.jsx)(()=>(0,l.jsxs)("button",{onClick:()=>n(e=>!e),className:"h-11 rounded-xl px-3 text-slate-900 w-full text-left",children:[t.adults," взрослых \xb7 ",t.children," детей \xb7 ",t.rooms," номеров"]}),{}),a&&(0,l.jsxs)("div",{className:"absolute z-50 mt-2 rounded-2xl border border-white/10 bg-premium-black shadow-xl w-64 p-3 grid gap-3",children:[[{k:"adults",label:"Взрослые"},{k:"children",label:"Дети"},{k:"rooms",label:"Номера"}].map(e=>{let{k:r,label:a}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{children:a}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:()=>s({...t,[r]:Math.max(0,t[r]-1)}),className:"h-8 w-8 grid place-items-center rounded-lg bg-white/10 hover:bg-white/15",children:"-"}),(0,l.jsx)("div",{className:"w-8 text-center",children:t[r]}),(0,l.jsx)("button",{onClick:()=>s({...t,[r]:t[r]+1}),className:"h-8 w-8 grid place-items-center rounded-lg bg-white/10 hover:bg-white/15",children:"+"})]})]},r)}),(0,l.jsx)("button",{onClick:()=>n(!1),className:"px-3 py-2 rounded-lg bg-premium-gold text-premium-black font-semibold text-sm",children:"Готово"})]})]})}function h(e){let{onSearch:t}=e,[s,a]=(0,r.useState)(""),[n,i]=(0,r.useState)([]),[o,c]=(0,r.useState)({start:null,end:null}),[d,h]=(0,r.useState)(!1),[x,g]=(0,r.useState)({adults:2,children:0,rooms:1}),[p,b]=(0,r.useState)(!1),f=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=new AbortController,t=setTimeout(async function(){if(!s||s.length<2){i([]);return}try{var t,l,r;let a=await fetch("/api/ai/groq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:"Выдавай до 6 кратких подсказок гео по Камчатке: города, районы, ориентиры. Формат: label | type(city|region|poi). Только по Камчатскому краю."},{role:"user",content:"подсказки: ".concat(s)}],max_tokens:200,temperature:.2}),signal:e.signal}),n=await a.json(),o=(null==n?void 0:null===(r=n.choices)||void 0===r?void 0:null===(l=r[0])||void 0===l?void 0:null===(t=l.message)||void 0===t?void 0:t.content)||"",c=String(o).split("\n").map(e=>e.trim()).filter(Boolean).slice(0,6).map((e,t)=>{let[s,l]=e.split("|").map(e=>e.trim());return{id:"s".concat(t),label:s||e,type:l||"poi"}});i(c)}catch(e){}},200);return()=>{clearTimeout(t),e.abort()}},[s]),(0,l.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-2 grid sm:grid-cols-[2fr_1.5fr_1.5fr_1fr_auto] gap-2 items-center",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{value:s,onChange:e=>a(e.target.value),placeholder:"Куда вы едете?",className:"h-11 rounded-xl px-3 text-slate-900 w-full"}),!!n.length&&(0,l.jsx)("div",{className:"absolute z-40 mt-1 rounded-xl border border-white/10 bg-premium-black w-full p-1",children:n.map(e=>(0,l.jsx)("button",{onClick:()=>{a(e.label),i([])},className:"w-full text-left px-3 py-2 rounded-lg hover:bg-white/10 text-sm",children:e.label},e.id))})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("button",{ref:f,onClick:()=>h(e=>!e),className:"h-11 rounded-xl px-3 text-slate-900 w-full text-left",children:[o.start?o.start.toLocaleDateString("ru-RU"):"Дата заезда"," — ",o.end?o.end.toLocaleDateString("ru-RU"):"Дата выезда"]}),d&&(0,l.jsx)("div",{className:"absolute top-[3.2rem] left-0",children:(0,l.jsx)(u,{value:o,onChange:c,onClose:()=>h(!1),anchorRef:f})})]}),(0,l.jsx)(m,{value:x,onChange:g}),(0,l.jsxs)("label",{className:"flex items-center gap-2 text-sm text-white/80 px-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:p,onChange:e=>b(e.target.checked)})," Для работы"]}),(0,l.jsx)("button",{onClick:()=>t({location:s,range:o,guests:x,work:p}),className:"h-11 rounded-xl px-4 bg-premium-gold text-premium-black font-bold",children:"Найти"})]})}let x=[{id:"kutkha",title:"База \xabКутха\xbb",location:"Елизовский район",rating:4.8,priceFrom:4200,img:"https://images.unsplash.com/photo-1505693416388-ac5ce068fe85?q=80&w=1200&auto=format&fit=crop",tags:["баня","река","семейный"]},{id:"river-lodge",title:"River Lodge",location:"р. Камчатка",rating:4.9,priceFrom:5800,img:"https://images.unsplash.com/photo-1505691938895-1758d7feb511?q=80&w=1200&auto=format&fit=crop",tags:["рыбалка","трансфер","полный пансион"]},{id:"volcano-view",title:"Volcano View",location:"Петропавловск‑Камчатский",rating:4.7,priceFrom:3500,img:"https://images.unsplash.com/photo-1460353581641-37baddab0fa2?q=80&w=1200&auto=format&fit=crop",tags:["вид на вулканы","центр"]}];function g(){let[e,t]=(0,r.useState)("tourist"),[s,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),g=(0,r.useMemo)(()=>x.filter(e=>{let t=!s||(e.title+" "+e.location+" "+e.tags.join(" ")).toLowerCase().includes(s.toLowerCase()),l=""===i||e.priceFrom>=Number(i),r=""===c||e.priceFrom<=Number(c);return t&&l&&r}),[s,i,c]),[p,b]=(0,r.useState)(!1),[f,j]=(0,r.useState)({start:null,end:null}),[w,v]=(0,r.useState)({adults:2,children:0,rooms:1});return(0,l.jsxs)("main",{className:"min-h-screen bg-premium-black text-white px-6 py-8 grid gap-6",children:[(0,l.jsxs)("header",{className:"flex items-center justify-between gap-3 flex-wrap",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("a",{href:"/",className:"px-3 py-1.5 rounded-lg bg-white/10 hover:bg-white/15 text-sm",children:"← На главную"}),(0,l.jsx)("h1",{className:"text-2xl sm:text-3xl font-extrabold",children:"Размещение"})]}),(0,l.jsx)("div",{className:"flex gap-2 bg-white/5 border border-white/10 rounded-full p-1",children:["tourist","operator"].map(s=>(0,l.jsx)("button",{onClick:()=>t(s),className:"px-3 py-1.5 rounded-full text-sm ".concat(e===s?"bg-premium-gold text-premium-black":"hover:bg-white/10"),children:"tourist"===s?"Турист":"Туроператор"},s))})]}),(0,l.jsx)("section",{className:"grid gap-3 relative",children:(0,l.jsx)(h,{onSearch:()=>{}})}),(0,l.jsxs)("section",{className:"grid gap-3 relative",children:[(0,l.jsxs)("div",{className:"grid sm:grid-cols-5 gap-3",children:[(0,l.jsx)("input",{value:s,onChange:e=>n(e.target.value),placeholder:"Куда: база, район…",className:"h-11 rounded-xl px-3 text-slate-900 sm:col-span-2"}),(0,l.jsxs)("button",{onClick:()=>b(e=>!e),className:"h-11 rounded-xl px-3 text-slate-900 text-left",children:[f.start?f.start.toLocaleDateString("ru-RU"):"Дата заезда"," — ",f.end?f.end.toLocaleDateString("ru-RU"):"Дата выезда"]}),(0,l.jsx)(m,{value:w,onChange:v})]}),p&&(0,l.jsx)("div",{className:"absolute z-50 top-[3.5rem] left-0",children:(0,l.jsx)(u,{value:f,onChange:j,onClose:()=>b(!1)})}),(0,l.jsxs)("div",{className:"grid sm:grid-cols-3 gap-3",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsx)("input",{type:"number",value:i,onChange:e=>o(""===e.target.value?"":Number(e.target.value)),placeholder:"Мин ₽/ночь",className:"h-11 rounded-xl px-3 text-slate-900"}),(0,l.jsx)("input",{type:"number",value:c,onChange:e=>d(""===e.target.value?"":Number(e.target.value)),placeholder:"Макс ₽/ночь",className:"h-11 rounded-xl px-3 text-slate-900"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm overflow-x-auto no-scrollbar sm:col-span-2",children:[["баня","река","рыбалка","пансион","вид на вулканы","семейный","центр","трансфер"].map(e=>(0,l.jsx)("button",{onClick:()=>n(t=>t?t+" "+e:e),className:"px-3 py-2 rounded-full bg-white/10 hover:bg-white/15 whitespace-nowrap",children:e},e)),(0,l.jsxs)("select",{className:"h-10 rounded-xl px-3 bg-white/10 border border-white/10",children:[(0,l.jsx)("option",{children:"Сортировка: по популярности"}),(0,l.jsx)("option",{children:"Сортировка: цена ↑"}),(0,l.jsx)("option",{children:"Сортировка: цена ↓"}),(0,l.jsx)("option",{children:"Сортировка: рейтинг"})]})]})]})]}),(0,l.jsx)("section",{className:"grid gap-4 grid-cols-1 sm:grid-cols-3",children:g.map(e=>(0,l.jsxs)("article",{className:"rounded-2xl overflow-hidden border border-white/10 bg-white/5",children:[(0,l.jsx)("img",{src:e.img,alt:e.title,className:"w-full h-40 object-cover"}),(0,l.jsxs)("div",{className:"p-4 grid gap-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h3",{className:"font-extrabold",children:e.title}),(0,l.jsx)("div",{className:"text-premium-gold font-bold",children:e.rating.toFixed(1)})]}),(0,l.jsx)("div",{className:"text-white/70 text-sm",children:e.location}),(0,l.jsx)("div",{className:"text-sm flex flex-wrap gap-1",children:e.tags.map(e=>(0,l.jsx)("span",{className:"px-2 py-1 rounded-full bg-white/10 text-white/80 text-xs",children:e},e))}),(0,l.jsxs)("div",{className:"flex items-center justify-between pt-1",children:[(0,l.jsxs)("div",{className:"text-white/85",children:[(0,l.jsx)("span",{className:"font-black text-premium-gold",children:e.priceFrom.toLocaleString("ru-RU")})," ₽/ночь"]}),(0,l.jsx)(a.default,{href:"/hub/stay/".concat(e.id),className:"px-3 py-2 rounded-lg bg-premium-gold text-premium-black font-semibold",children:"Подробнее"})]})]})]},e.id))}),(0,l.jsxs)("section",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 grid gap-3",children:[(0,l.jsx)("div",{className:"text-sm text-white/70",children:"Предпросмотр календаря (стаб)"}),(0,l.jsx)("div",{className:"grid grid-cols-7 gap-[2px]",children:Array.from({length:28}).map((e,t)=>(0,l.jsx)("div",{className:"h-12 grid place-items-center text-xs ".concat(t%5==0?"bg-green-900/40":"bg-white/5"),children:t+1},t))}),"operator"===e&&(0,l.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,l.jsx)(a.default,{href:"/operator-web/stays/onboarding",className:"px-4 py-2 rounded-lg bg-premium-gold text-premium-black font-semibold",children:"Добавить объект"}),(0,l.jsx)(a.default,{href:"/operator-web",className:"px-4 py-2 rounded-lg bg-white/10 font-semibold",children:"Кабинет оператора"})]})]})]})}}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=5579)}),_N_E=e.O()}]);