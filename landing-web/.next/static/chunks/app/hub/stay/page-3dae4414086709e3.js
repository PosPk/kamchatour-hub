(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[682],{5579:function(e,t,s){Promise.resolve().then(s.bind(s,8531))},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return a.a}});var l=s(2972),a=s.n(l)},8531:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var l=s(7437),a=s(2265);function i(e){let t=new Date(e);return t.setHours(0,0,0,0),t}function r(e,t){let s=new Date(e);return s.setMonth(s.getMonth()+t),s}function n(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function c(e,t){return i(e).getTime()<i(t).getTime()}function d(e){let{monthDate:t,range:s,onPick:a,minDate:r}=e,d=t.getFullYear(),o=t.getMonth(),m=(new Date(d,o,1).getDay()+6)%7,u=new Date(d,o+1,0).getDate(),h=[];for(let e=0;e<m;e++)h.push(null);for(let e=1;e<=u;e++)h.push(new Date(d,o,e));for(;h.length%7!=0;)h.push(null);let x=e=>{var t;return s.start&&s.end&&(t=s.start,i(e).getTime()>i(t).getTime()||n(e,s.start))&&(c(e,s.end)||n(e,s.end))},g=e=>c(e,r);return(0,l.jsxs)("div",{className:"p-3",children:[(0,l.jsx)("div",{className:"text-center font-semibold mb-2",children:t.toLocaleString("ru-RU",{month:"long",year:"numeric"})}),(0,l.jsx)("div",{className:"grid grid-cols-7 gap-1 text-xs text-white/60 mb-1",children:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"].map(e=>(0,l.jsx)("div",{className:"h-7 grid place-items-center",children:e},e))}),(0,l.jsx)("div",{className:"grid grid-cols-7 gap-1",children:h.map((e,t)=>{if(!e)return(0,l.jsx)("div",{className:"h-9"},t);let i=s.start&&n(e,s.start),r=s.end&&n(e,s.end),c=s.start&&s.end&&x(e),d=g(e);return(0,l.jsx)("button",{disabled:d,onClick:()=>a(e),className:"h-9 rounded-md text-sm grid place-items-center\n                ".concat(d?"text-white/25 cursor-not-allowed":"hover:bg-white/10","\n                ").concat(c?"bg-premium-gold/20":"","\n                ").concat(i||r?"bg-premium-gold text-premium-black font-bold":""),children:e.getDate()},t)})})]})}function o(e){let{value:t,onChange:s,onClose:n,anchorRef:o}=e,m=i(new Date),[u,h]=(0,a.useState)(null),[x,g]=(0,a.useState)(()=>i(t.start||m)),p=(0,a.useRef)(null),b=(0,a.useMemo)(()=>t,[t]);(0,a.useEffect)(()=>{function e(e){let t=e.target;!p.current||p.current.contains(t)||(null==o?void 0:o.current)&&o.current.contains(t)||null==n||n()}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[n,o]);let j=e=>{if(!b.start||b.start&&b.end){s({start:e,end:null}),h(null);return}b.start&&!b.end&&(c(e,b.start)?s({start:e,end:b.start}):s({start:b.start,end:e}),h(null))};return(0,l.jsxs)("div",{ref:p,className:"absolute z-50 mt-2 rounded-2xl border border-white/10 bg-premium-black shadow-xl overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b border-white/10",children:[(0,l.jsx)("div",{className:"text-sm text-white/70",children:"Выберите даты"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>g(r(x,-1)),className:"h-8 w-8 grid place-items-center rounded-lg bg-white/10 hover:bg-white/15",children:"‹"}),(0,l.jsx)("button",{onClick:()=>g(r(x,1)),className:"h-8 w-8 grid place-items-center rounded-lg bg-white/10 hover:bg-white/15",children:"›"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[(0,l.jsx)(d,{monthDate:x,range:b,onPick:j,minDate:m}),(0,l.jsx)(d,{monthDate:r(x,1),range:b,onPick:j,minDate:m})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2 px-3 py-2 border-t border-white/10",children:[(0,l.jsx)("button",{onClick:()=>s({start:null,end:null}),className:"px-3 py-2 rounded-lg bg-white/10 hover:bg-white/15 text-sm",children:"Очистить"}),(0,l.jsxs)("div",{className:"text-sm text-white/70",children:[b.start?b.start.toLocaleDateString("ru-RU"):"—"," → ",b.end?b.end.toLocaleDateString("ru-RU"):"—"]}),(0,l.jsx)("button",{onClick:n,className:"px-3 py-2 rounded-lg bg-premium-gold text-premium-black font-semibold text-sm",children:"Готово"})]})]})}function m(e){let{value:t,onChange:s}=e,[i,r]=(0,a.useState)(!1),n=(0,a.useRef)(null);return(0,a.useEffect)(()=>{function e(e){n.current&&!n.current.contains(e.target)&&r(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,l.jsxs)("div",{className:"relative",ref:n,children:[(0,l.jsx)(()=>{let e=t.children>0?"".concat(t.children," реб.")+(t.childAges.length?" ("+t.childAges.join(",")+")":""):"0 реб.";return(0,l.jsxs)("button",{onClick:()=>r(e=>!e),className:"h-11 rounded-xl px-3 text-slate-900 w-full text-left",children:[t.adults," взр., ",e,", ",t.rooms," ном."]})},{}),i&&(0,l.jsxs)("div",{className:"absolute z-50 mt-2 rounded-2xl border border-white/10 bg-premium-black shadow-xl w-64 p-3 grid gap-3",children:[[{k:"adults",label:"Взрослые"},{k:"children",label:"Дети"},{k:"rooms",label:"Номера"}].map(e=>{let{k:a,label:i}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{children:i}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:()=>{let e=Math.max(0,t[a]-1);if("children"===a){let l=t.childAges.slice(0,e);s({...t,children:e,childAges:l})}else s({...t,[a]:e})},className:"h-8 w-8 grid place-items-center rounded-lg bg-white/10 hover:bg-white/15",children:"-"}),(0,l.jsx)("div",{className:"w-8 text-center",children:t[a]}),(0,l.jsx)("button",{onClick:()=>{let e=t[a]+1;if("children"===a){let l=[...t.childAges];l.length<e&&l.push(7),s({...t,children:e,childAges:l})}else s({...t,[a]:e})},className:"h-8 w-8 grid place-items-center rounded-lg bg-white/10 hover:bg-white/15",children:"+"})]})]},a)}),t.children>0&&(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)("div",{className:"text-xs text-white/70",children:"Возраст детей"}),t.childAges.map((e,a)=>(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsxs)("div",{children:["Ребёнок ",a+1]}),(0,l.jsx)("select",{value:e,onChange:e=>{let l=[...t.childAges];l[a]=Number(e.target.value),s({...t,childAges:l})},className:"h-9 rounded-lg px-2 bg-white/10 border border-white/10",children:Array.from({length:18}).map((e,t)=>(0,l.jsx)("option",{value:t,children:t},t))})]},a))]}),(0,l.jsx)("button",{onClick:()=>r(!1),className:"px-3 py-2 rounded-lg bg-premium-gold text-premium-black font-semibold text-sm",children:"Готово"})]})]})}function u(e){let{onSearch:t}=e,[s,i]=(0,a.useState)(""),[r,n]=(0,a.useState)([]),[c,d]=(0,a.useState)({start:null,end:null}),[u,h]=(0,a.useState)(!1),[x,g]=(0,a.useState)({adults:2,children:0,childAges:[],rooms:1}),[p,b]=(0,a.useState)(!1),j=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=new AbortController,t=setTimeout(async function(){if(!s||s.length<2){n([]);return}try{var t,l,a;let i=await fetch("/api/ai/groq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:"Выдавай до 6 кратких подсказок гео по Камчатке: города, районы, ориентиры. Формат: label | type(city|region|poi). Только по Камчатскому краю."},{role:"user",content:"подсказки: ".concat(s)}],max_tokens:200,temperature:.2}),signal:e.signal}),r=await i.json(),c=(null==r?void 0:null===(a=r.choices)||void 0===a?void 0:null===(l=a[0])||void 0===l?void 0:null===(t=l.message)||void 0===t?void 0:t.content)||"",d=String(c).split("\n").map(e=>e.trim()).filter(Boolean).slice(0,6).map((e,t)=>{let[s,l]=e.split("|").map(e=>e.trim());return{id:"s".concat(t),label:s||e,type:l||"poi"}});n(d)}catch(e){}},200);return()=>{clearTimeout(t),e.abort()}},[s]),(0,l.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-2 grid sm:grid-cols-[2fr_1.5fr_1.5fr_1fr_auto] gap-2 items-center",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{value:s,onChange:e=>i(e.target.value),placeholder:"Куда вы едете?",className:"h-11 rounded-xl px-3 text-slate-900 w-full"}),!!r.length&&(0,l.jsx)("div",{className:"absolute z-40 mt-1 rounded-xl border border-white/10 bg-premium-black w-full p-1",children:r.map(e=>(0,l.jsx)("button",{onClick:()=>{i(e.label),n([])},className:"w-full text-left px-3 py-2 rounded-lg hover:bg-white/10 text-sm",children:e.label},e.id))})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("button",{ref:j,onClick:()=>h(e=>!e),className:"h-11 rounded-xl px-3 text-slate-900 w-full text-left",children:[c.start?c.start.toLocaleDateString("ru-RU"):"Дата заезда"," — ",c.end?c.end.toLocaleDateString("ru-RU"):"Дата выезда"]}),u&&(0,l.jsx)("div",{className:"absolute top-[3.2rem] left-0",children:(0,l.jsx)(o,{value:c,onChange:d,onClose:()=>h(!1),anchorRef:j})})]}),(0,l.jsx)(m,{value:x,onChange:g}),(0,l.jsxs)("label",{className:"flex items-center gap-2 text-sm text-white/80 px-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:p,onChange:e=>b(e.target.checked)})," Для работы"]}),(0,l.jsx)("button",{onClick:()=>t({location:s,range:c,guests:x,work:p}),className:"h-11 rounded-xl px-4 bg-premium-gold text-premium-black font-bold",children:"Найти"})]})}let h=["Отель","Гостевой дом","Апартаменты","Хостел","Частный дом"],x=["Бесплатный Wi‑Fi","Парковка","Спа‑услуги","Трансфер","Термальный бассейн"];function g(e){let{value:t,onChange:s,onApply:a}=e,i=e=>s({...t,...e}),r=(e,s)=>{let l=new Set(t[e]);l.has(s)?l.delete(s):l.add(s),i({[e]:Array.from(l)})};return(0,l.jsxs)("aside",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 grid gap-4",children:[(0,l.jsx)("div",{className:"text-lg font-extrabold",children:"Фильтры"}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)("div",{className:"text-sm text-white/70",children:"Цена за ночь, ₽"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"number",className:"h-10 rounded-lg px-3 text-slate-900 w-28",value:t.priceMin,onChange:e=>i({priceMin:Number(e.target.value)||0})}),(0,l.jsx)("span",{className:"text-white/60",children:"—"}),(0,l.jsx)("input",{type:"number",className:"h-10 rounded-lg px-3 text-slate-900 w-28",value:t.priceMax,onChange:e=>i({priceMax:Number(e.target.value)||0})})]}),(0,l.jsxs)("div",{className:"px-1",children:[(0,l.jsx)("input",{type:"range",min:0,max:3e4,step:500,value:t.priceMin,onChange:e=>i({priceMin:Number(e.target.value)}),className:"w-full"}),(0,l.jsx)("input",{type:"range",min:0,max:3e4,step:500,value:t.priceMax,onChange:e=>i({priceMax:Number(e.target.value)}),className:"w-full -mt-2"})]})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)("div",{className:"text-sm text-white/70",children:"Тип жилья"}),h.map(e=>(0,l.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,l.jsx)("input",{type:"checkbox",checked:t.types.includes(e),onChange:()=>r("types",e)})," ",e]},e))]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)("div",{className:"text-sm text-white/70",children:"Рейтинг"}),[9,8,7].map(e=>(0,l.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,l.jsx)("input",{type:"radio",name:"minRating",checked:t.minRating===e,onChange:()=>i({minRating:e})})," От ",e," и выше"]},e)),(0,l.jsx)("button",{onClick:()=>i({minRating:null}),className:"text-xs text-white/70 hover:text-white text-left",children:"Сбросить"})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)("div",{className:"text-sm text-white/70",children:"Удобства"}),x.map(e=>(0,l.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,l.jsx)("input",{type:"checkbox",checked:t.amenities.includes(e),onChange:()=>r("amenities",e)})," ",e]},e))]}),(0,l.jsx)("button",{onClick:a,className:"h-11 rounded-xl bg-premium-gold text-premium-black font-bold",children:"Применить фильтры"})]})}var p=s(7648);function b(e){let{item:t}=e;return(0,l.jsx)("article",{className:"rounded-2xl border border-white/10 bg-white/5 overflow-hidden hover:border-premium-gold/50 transition",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-[240px_1fr]",children:[(0,l.jsx)("img",{src:t.img,alt:t.title,className:"w-full h-48 sm:h-44 object-cover",loading:"lazy"}),(0,l.jsxs)("div",{className:"p-4 grid gap-2",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-extrabold text-lg",children:t.title}),(0,l.jsx)("div",{className:"text-white/70 text-sm",children:t.location})]}),(0,l.jsxs)("div",{className:"rounded-xl bg-black/60 border border-white/10 px-3 py-2 text-center",children:[(0,l.jsx)("div",{className:"text-xl font-black text-premium-gold",children:t.rating.toFixed(1)}),(0,l.jsx)("div",{className:"text-xs text-white/70",children:t.reviews?"".concat(t.reviews," отзывов"):"—"})]})]}),t.summary&&(0,l.jsx)("div",{className:"text-sm text-white/80",children:t.summary}),(0,l.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,l.jsxs)("div",{className:"text-white/85",children:[(0,l.jsx)("span",{className:"text-2xl font-black text-premium-gold",children:t.priceFrom.toLocaleString("ru-RU")})," ₽ / ночь"]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(p.default,{href:"/hub/stay/".concat(t.id),className:"px-4 py-2 rounded-lg bg-white/10 hover:bg-white/15 font-semibold",children:"Подробнее"}),(0,l.jsx)(p.default,{href:"/hub/stay/".concat(t.id),className:"px-4 py-2 rounded-lg bg-premium-gold text-premium-black font-semibold",children:"Забронировать"})]})]})]})]})})}let j=[{id:"kutkha",title:"База \xabКутха\xbb",location:"Елизовский район",rating:4.8,priceFrom:4200,img:"https://images.unsplash.com/photo-1505693416388-ac5ce068fe85?q=80&w=1200&auto=format&fit=crop",tags:["баня","река","семейный"]},{id:"river-lodge",title:"River Lodge",location:"р. Камчатка",rating:4.9,priceFrom:5800,img:"https://images.unsplash.com/photo-1505691938895-1758d7feb511?q=80&w=1200&auto=format&fit=crop",tags:["рыбалка","трансфер","полный пансион"]},{id:"volcano-view",title:"Volcano View",location:"Петропавловск‑Камчатский",rating:4.7,priceFrom:3500,img:"https://images.unsplash.com/photo-1460353581641-37baddab0fa2?q=80&w=1200&auto=format&fit=crop",tags:["вид на вулканы","центр"]}];function v(){let[e,t]=(0,a.useState)("tourist"),[s,i]=(0,a.useState)(""),[r,n]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),h=(0,a.useMemo)(()=>j.filter(e=>{let t=!s||(e.title+" "+e.location+" "+e.tags.join(" ")).toLowerCase().includes(s.toLowerCase()),l=""===r||e.priceFrom>=Number(r),a=""===c||e.priceFrom<=Number(c);return t&&l&&a}),[s,r,c]),[x,p]=(0,a.useState)(!1),[v,f]=(0,a.useState)({start:null,end:null}),[N,w]=(0,a.useState)({adults:2,children:0,childAges:[],rooms:1}),[k,y]=(0,a.useState)({priceMin:0,priceMax:3e4,types:[],minRating:null,amenities:[]});return(0,l.jsxs)("main",{className:"min-h-screen bg-premium-black text-white px-6 py-8 grid gap-6",children:[(0,l.jsxs)("header",{className:"flex items-center justify-between gap-3 flex-wrap",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("a",{href:"/",className:"px-3 py-1.5 rounded-lg bg-white/10 hover:bg-white/15 text-sm",children:"← На главную"}),(0,l.jsx)("h1",{className:"text-2xl sm:text-3xl font-extrabold",children:"Размещение"})]}),(0,l.jsx)("div",{className:"flex gap-2 bg-white/5 border border-white/10 rounded-full p-1",children:["tourist","operator"].map(s=>(0,l.jsx)("button",{onClick:()=>t(s),className:"px-3 py-1.5 rounded-full text-sm ".concat(e===s?"bg-premium-gold text-premium-black":"hover:bg-white/10"),children:"tourist"===s?"Турист":"Туроператор"},s))})]}),(0,l.jsxs)("section",{className:"relative overflow-hidden rounded-3xl",children:[(0,l.jsx)("img",{src:"https://images.unsplash.com/photo-1505691938895-1758d7feb511?q=80&w=1920&auto=format&fit=crop",alt:"Hero",className:"w-full h-[32vh] object-cover"}),(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"}),(0,l.jsxs)("div",{className:"absolute inset-0 p-6 grid content-end gap-3",children:[(0,l.jsx)("div",{className:"text-2xl font-extrabold",children:"Найдите идеальное место для отдыха на Камчатке"}),(0,l.jsx)("div",{className:"text-white/85",children:"От уютных гостевых домов до современных отелей — с лучшей ценой."}),(0,l.jsx)(u,{onSearch:()=>{}})]})]}),(0,l.jsxs)("section",{className:"grid gap-3 relative",children:[(0,l.jsxs)("div",{className:"grid sm:grid-cols-5 gap-3",children:[(0,l.jsx)("input",{value:s,onChange:e=>i(e.target.value),placeholder:"Куда: база, район…",className:"h-11 rounded-xl px-3 text-slate-900 sm:col-span-2"}),(0,l.jsxs)("button",{onClick:()=>p(e=>!e),className:"h-11 rounded-xl px-3 text-slate-900 text-left",children:[v.start?v.start.toLocaleDateString("ru-RU"):"Дата заезда"," — ",v.end?v.end.toLocaleDateString("ru-RU"):"Дата выезда"]}),(0,l.jsx)(m,{value:N,onChange:w})]}),x&&(0,l.jsx)("div",{className:"absolute z-50 top-[3.5rem] left-0",children:(0,l.jsx)(o,{value:v,onChange:f,onClose:()=>p(!1)})}),(0,l.jsxs)("div",{className:"grid sm:grid-cols-3 gap-3",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsx)("input",{type:"number",value:r,onChange:e=>n(""===e.target.value?"":Number(e.target.value)),placeholder:"Мин ₽/ночь",className:"h-11 rounded-xl px-3 text-slate-900"}),(0,l.jsx)("input",{type:"number",value:c,onChange:e=>d(""===e.target.value?"":Number(e.target.value)),placeholder:"Макс ₽/ночь",className:"h-11 rounded-xl px-3 text-slate-900"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm overflow-x-auto no-scrollbar sm:col-span-2",children:[["баня","река","рыбалка","пансион","вид на вулканы","семейный","центр","трансфер"].map(e=>(0,l.jsx)("button",{onClick:()=>i(t=>t?t+" "+e:e),className:"px-3 py-2 rounded-full bg-white/10 hover:bg-white/15 whitespace-nowrap",children:e},e)),(0,l.jsxs)("select",{className:"h-10 rounded-xl px-3 bg-white/10 border border-white/10",children:[(0,l.jsx)("option",{children:"Сортировка: по популярности"}),(0,l.jsx)("option",{children:"Сортировка: цена ↑"}),(0,l.jsx)("option",{children:"Сортировка: цена ↓"}),(0,l.jsx)("option",{children:"Сортировка: рейтинг"})]})]})]})]}),(0,l.jsxs)("section",{className:"grid gap-4 sm:grid-cols-[280px_1fr]",children:[(0,l.jsx)(g,{value:k,onChange:y,onApply:()=>{}}),(0,l.jsxs)("div",{className:"grid gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsxs)("div",{className:"text-white/70",children:["Найдено вариантов: ",h.length]}),(0,l.jsxs)("select",{className:"h-10 rounded-xl px-3 bg-white/10 border border-white/10",children:[(0,l.jsx)("option",{children:"Рекомендуемые"}),(0,l.jsx)("option",{children:"Цена: низкая → высокая"}),(0,l.jsx)("option",{children:"Цена: высокая → низкая"}),(0,l.jsx)("option",{children:"Рейтинг"})]})]}),(0,l.jsx)("div",{className:"grid gap-3",children:h.map(e=>(0,l.jsx)(b,{item:{id:e.id,title:e.title,location:e.location,rating:e.rating,priceFrom:e.priceFrom,img:e.img,reviews:128,summary:"Рядом с термальными источниками, удобная парковка, Wi‑Fi"}},e.id))})]})]})]})}}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=5579)}),_N_E=e.O()}]);