(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[682],{5579:function(e,t,i){Promise.resolve().then(i.bind(i,8531))},7648:function(e,t,i){"use strict";i.d(t,{default:function(){return a.a}});var s=i(2972),a=i.n(s)},2398:function(e,t,i){"use strict";i.d(t,{j:function(){return s}});let s=[{id:"avacha",name:"Гостиница \xabАвача\xbb",location:"Петропавловск‑Камчатский",coords:{lat:53.037,lng:158.655},rating:4.3,stars:3,reviews:412,type:"Отель",price:4500,distanceKm:1.2,images:["https://images.unsplash.com/photo-1528909514045-2fa4ac7a08ba?q=80&w=1600&auto=format&fit=crop","https://images.unsplash.com/photo-1455587734955-081b22074882?q=80&w=1600&auto=format&fit=crop","https://images.unsplash.com/photo-1505691938895-1758d7feb511?q=80&w=1600&auto=format&fit=crop"],amenities:["Бесплатный Wi‑Fi","Парковка","Завтрак","Трансфер"],description:"Уютная городская гостиница рядом с набережной. Номера с видом на вулканы, включён завтрак."},{id:"volcano-view",name:"Volcano View Apartments",location:"Петропавловск‑Камчатский",coords:{lat:53.027,lng:158.676},rating:4.7,stars:4,reviews:216,type:"Апартаменты",price:5900,distanceKm:2.4,images:["https://images.unsplash.com/photo-1460353581641-37baddab0fa2?q=80&w=1600&auto=format&fit=crop","https://images.unsplash.com/photo-1505693416388-ac5ce068fe85?q=80&w=1600&auto=format&fit=crop"],amenities:["Бесплатный Wi‑Fi","Кухня","Вид на вулканы","Размещение с животными"],description:"Современные апартаменты с панорамным видом на Корякский и Авачинский вулканы."},{id:"elizovo-park",name:"Elizovo Park Hotel",location:"Елизово",coords:{lat:53.184,lng:158.381},rating:4.5,stars:4,reviews:158,type:"Отель",price:5200,distanceKm:.8,images:["https://images.unsplash.com/photo-1505691938895-1758d7feb511?q=80&w=1600&auto=format&fit=crop","https://images.unsplash.com/photo-1496412705862-e0088f16f791?q=80&w=1600&auto=format&fit=crop"],amenities:["Бесплатный Wi‑Fi","Парковка","Спа‑услуги","Трансфер"],description:"Отель в центре Елизово, рядом с кафе и бассейном. Уютные номера и внимательный персонал."},{id:"river-lodge",name:"River Lodge",location:"р. Камчатка",coords:{lat:55.444,lng:159.6},rating:4.9,stars:5,reviews:94,type:"Гостевой дом",price:8300,distanceKm:35,images:["https://images.unsplash.com/photo-1499696010180-025ef6e1a8f5?q=80&w=1600&auto=format&fit=crop","https://images.unsplash.com/photo-1519710164239-da123dc03ef4?q=80&w=1600&auto=format&fit=crop"],amenities:["Полный пансион","Трансфер","Бесплатный Wi‑Fi","Баня"],description:"Рыболовная база на Камчатке. Полный пансион, баня, трансферы. Идеально для рыбалки."},{id:"thermal-villa",name:"Thermal Springs Villa",location:"Паратунка",coords:{lat:52.957,lng:158.26},rating:4.6,stars:4,reviews:121,type:"Вилла",price:9900,distanceKm:3.1,images:["https://images.unsplash.com/photo-1505691938474-12f4d7ec8d24?q=80&w=1600&auto=format&fit=crop","https://images.unsplash.com/photo-1445019980597-93fa8acb246c?q=80&w=1600&auto=format&fit=crop"],amenities:["Термальный бассейн","Парковка","Бесплатный Wi‑Fi","Питание включено"],description:"Частная вилла с собственным термальным бассейном. Идеальна для семейного отдыха."},{id:"hostel-bear",name:"Хостел \xabМедведь\xbb",location:"Петропавловск‑Камчатский",coords:{lat:53.05,lng:158.64},rating:3.9,stars:2,reviews:203,type:"Хостел",price:1800,distanceKm:1.8,images:["https://images.unsplash.com/photo-1505693416388-ac5ce068fe85?q=80&w=1600&auto=format&fit=crop"],amenities:["Бесплатный Wi‑Fi","Кухня"],description:"Доступный вариант в центре. Общая кухня, чисто и удобно."},{id:"guest-koryak",name:"Гостевой дом \xabКоряк\xbb",location:"Петропавловск‑Камчатский",coords:{lat:53.01,lng:158.69},rating:4.4,stars:3,reviews:77,type:"Гостевой дом",price:3900,distanceKm:4.5,images:["https://images.unsplash.com/photo-1505691938895-1758d7feb511?q=80&w=1600&auto=format&fit=crop"],amenities:["Парковка","Трансфер","Размещение с животными"],description:"Уютный гостевой дом в спокойном районе, удобный трансфер."},{id:"apt-bay",name:"Bay View Апартаменты",location:"Петропавловск‑Камчатский",coords:{lat:53.03,lng:158.7},rating:4.8,stars:5,reviews:52,type:"Апартаменты",price:7500,distanceKm:.9,images:["https://images.unsplash.com/photo-1501183638710-841dd1904471?q=80&w=1600&auto=format&fit=crop"],amenities:["Бесплатный Wi‑Fi","Вид на залив","Кухня"],description:"Просторные апартаменты с видом на Авачинскую бухту."},{id:"inn-forest",name:"Forest Inn",location:"Елизово",coords:{lat:53.2,lng:158.38},rating:4.1,stars:3,reviews:98,type:"Гостевой дом",price:3100,distanceKm:2.9,images:["https://images.unsplash.com/photo-1484154218962-a197022b5858?q=80&w=1600&auto=format&fit=crop"],amenities:["Парковка","Завтрак"],description:"Тихое место рядом с лесом, идеальное для прогулок."},{id:"hotel-center",name:"Hotel Center",location:"Петропавловск‑Камчатский",coords:{lat:53.05,lng:158.62},rating:4,stars:3,reviews:340,type:"Отель",price:3600,distanceKm:.5,images:["https://images.unsplash.com/photo-1568495248636-6432b97bd949?q=80&w=1600&auto=format&fit=crop"],amenities:["Бесплатный Wi‑Fi","Парковка","Завтрак"],description:"Классический городской отель в шаговой доступности от центра."},{id:"mount-villa",name:"Mount View Villa",location:"Паратунка",coords:{lat:52.95,lng:158.27},rating:4.6,stars:4,reviews:61,type:"Вилла",price:11200,distanceKm:2.1,images:["https://images.unsplash.com/photo-1470124182917-cc6e71b22ecc?q=80&w=1600&auto=format&fit=crop"],amenities:["Термальный бассейн","Спа‑услуги","Парковка"],description:"Элегантная вилла с видом на горы и собственной купелью."},{id:"budget-elizovo",name:"Budget Елизово",location:"Елизово",coords:{lat:53.19,lng:158.37},rating:3.8,stars:2,reviews:145,type:"Частный дом",price:2200,distanceKm:3.7,images:["https://images.unsplash.com/photo-1499696786230-29eefa1d1f17?q=80&w=1600&auto=format&fit=crop"],amenities:["Кухня","Парковка"],description:"Эконом‑проживание для тех, кто весь день в турах."}]},8531:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return j}});var s=i(7437),a=i(2265);function n(e){let t=new Date(e);return t.setHours(0,0,0,0),t}function l(e,t){let i=new Date(e);return i.setMonth(i.getMonth()+t),i}function r(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function c(e,t){return n(e).getTime()<n(t).getTime()}function o(e){let{monthDate:t,range:i,onPick:a,minDate:l}=e,o=t.getFullYear(),d=t.getMonth(),m=(new Date(o,d,1).getDay()+6)%7,u=new Date(o,d+1,0).getDate(),h=[];for(let e=0;e<m;e++)h.push(null);for(let e=1;e<=u;e++)h.push(new Date(o,d,e));for(;h.length%7!=0;)h.push(null);let p=e=>{var t;return i.start&&i.end&&(t=i.start,n(e).getTime()>n(t).getTime()||r(e,i.start))&&(c(e,i.end)||r(e,i.end))},g=e=>c(e,l);return(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsx)("div",{className:"text-center font-semibold mb-2",children:t.toLocaleString("ru-RU",{month:"long",year:"numeric"})}),(0,s.jsx)("div",{className:"grid grid-cols-7 gap-1 text-xs text-white/60 mb-1",children:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"].map(e=>(0,s.jsx)("div",{className:"h-7 grid place-items-center",children:e},e))}),(0,s.jsx)("div",{className:"grid grid-cols-7 gap-1",children:h.map((e,t)=>{if(!e)return(0,s.jsx)("div",{className:"h-9"},t);let n=i.start&&r(e,i.start),l=i.end&&r(e,i.end),c=i.start&&i.end&&p(e),o=g(e);return(0,s.jsx)("button",{disabled:o,onClick:()=>a(e),className:"h-9 rounded-md text-sm grid place-items-center\n                ".concat(o?"text-white/25 cursor-not-allowed":"hover:bg-white/10","\n                ").concat(c?"bg-premium-gold/20":"","\n                ").concat(n||l?"bg-premium-gold text-premium-black font-bold":""),children:e.getDate()},t)})})]})}function d(e){let{value:t,onChange:i,onClose:r,anchorRef:d}=e,m=n(new Date),[u,h]=(0,a.useState)(null),[p,g]=(0,a.useState)(()=>n(t.start||m)),x=(0,a.useRef)(null),[b,f]=(0,a.useState)(null),v=(0,a.useMemo)(()=>t,[t]);(0,a.useEffect)(()=>{function e(e){let t=e.target;!x.current||x.current.contains(t)||(null==d?void 0:d.current)&&d.current.contains(t)||null==r||r()}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[r,d]),(0,a.useEffect)(()=>{function e(){let e=null==d?void 0:d.current;if(!e)return;let t=e.getBoundingClientRect();f({top:t.bottom+window.scrollY+6,left:t.left+window.scrollX,width:t.width})}return e(),window.addEventListener("scroll",e,!0),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e,!0),window.removeEventListener("resize",e)}},[d]);let w=e=>{if(!v.start||v.start&&v.end){i({start:e,end:null}),h(null);return}v.start&&!v.end&&(c(e,v.start)?i({start:e,end:v.start}):i({start:v.start,end:e}),h(null))};return(0,s.jsxs)("div",{ref:x,className:"fixed z-[9999] rounded-2xl border border-white/10 bg-premium-black shadow-xl overflow-hidden",style:b?{top:b.top,left:b.left,minWidth:Math.max(320,b.width)}:void 0,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b border-white/10",children:[(0,s.jsx)("div",{className:"text-sm text-white/70",children:"Выберите даты"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>g(l(p,-1)),className:"h-8 w-8 grid place-items-center rounded-lg bg-white/10 hover:bg-white/15",children:"‹"}),(0,s.jsx)("button",{onClick:()=>g(l(p,1)),className:"h-8 w-8 grid place-items-center rounded-lg bg-white/10 hover:bg-white/15",children:"›"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[(0,s.jsx)(o,{monthDate:p,range:v,onPick:w,minDate:m}),(0,s.jsx)(o,{monthDate:l(p,1),range:v,onPick:w,minDate:m})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 px-3 py-2 border-t border-white/10",children:[(0,s.jsx)("button",{onClick:()=>i({start:null,end:null}),className:"px-3 py-2 rounded-lg bg-white/10 hover:bg-white/15 text-sm",children:"Очистить"}),(0,s.jsxs)("div",{className:"text-sm text-white/70",children:[v.start?v.start.toLocaleDateString("ru-RU"):"—"," → ",v.end?v.end.toLocaleDateString("ru-RU"):"—"]}),v.start&&v.end?(0,s.jsxs)("div",{className:"text-sm text-white/85",children:[Math.max(1,Math.round((n(v.end).getTime()-n(v.start).getTime())/864e5))," ночей"]}):(0,s.jsx)("div",{}),(0,s.jsx)("button",{onClick:r,className:"px-3 py-2 rounded-lg bg-premium-gold text-premium-black font-semibold text-sm",children:"Готово"})]})]})}function m(e){var t,i;let{value:n,onChange:l,className:r}=e,[c,o]=(0,a.useState)(!1),d=(0,a.useRef)(null),[m,u]=(0,a.useState)(null);return(0,a.useEffect)(()=>{function e(e){d.current&&!d.current.contains(e.target)&&o(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.jsxs)("div",{className:"relative",ref:d,children:[(0,s.jsx)(()=>{let e=n.children>0?"".concat(n.children," реб.")+(n.childAges.length?" ("+n.childAges.join(",")+")":""):"0 реб.";return(0,s.jsxs)("button",{onClick:()=>o(e=>!e),className:"h-11 rounded-xl px-3 text-slate-900 w-full text-left ".concat(r||""),children:[n.adults," взр., ",e,", ",n.rooms," ном."]})},{}),c&&(0,s.jsxs)("div",{className:"fixed z-[9999] rounded-2xl border border-white/10 bg-premium-black shadow-xl p-3 grid gap-3",style:{top:(()=>{var e;let t=null===(e=d.current)||void 0===e?void 0:e.getBoundingClientRect();return t?t.bottom+window.scrollY+6:0})(),left:(()=>{var e;let t=null===(e=d.current)||void 0===e?void 0:e.getBoundingClientRect();return t?t.left+window.scrollX:0})(),minWidth:Math.max(260,(null===(i=d.current)||void 0===i?void 0:null===(t=i.getBoundingClientRect())||void 0===t?void 0:t.width)||260),position:"fixed"},children:[[{k:"adults",label:"Взрослые"},{k:"children",label:"Дети"},{k:"rooms",label:"Номера"}].map(e=>{let{k:t,label:i}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{children:i}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>{let e=Math.max(0,n[t]-1);if("children"===t){let t=n.childAges.slice(0,e);l({...n,children:e,childAges:t})}else l({...n,[t]:e})},className:"h-8 w-8 grid place-items-center rounded-lg bg-white/10 hover:bg-white/15",children:"-"}),(0,s.jsx)("div",{className:"w-8 text-center",children:n[t]}),(0,s.jsx)("button",{onClick:()=>{let e=n[t]+1;if("children"===t){let t=[...n.childAges];t.length<e&&t.push(7),l({...n,children:e,childAges:t})}else l({...n,[t]:e})},className:"h-8 w-8 grid place-items-center rounded-lg bg-white/10 hover:bg-white/15",children:"+"})]})]},t)}),n.children>0&&(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("div",{className:"text-xs text-white/70",children:"Возраст детей"}),n.childAges.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("div",{children:["Ребёнок ",t+1]}),(0,s.jsx)("select",{value:e,onChange:e=>{let i=[...n.childAges];i[t]=Number(e.target.value),l({...n,childAges:i})},className:"h-9 rounded-lg px-2 bg-white/10 border border-white/10",children:Array.from({length:18}).map((e,t)=>(0,s.jsx)("option",{value:t,children:t},t))})]},t))]}),(0,s.jsx)("button",{onClick:()=>o(!1),className:"px-3 py-2 rounded-lg bg-premium-gold text-premium-black font-semibold text-sm",children:"Готово"})]})]})}function u(e){let{onSearch:t}=e,[i,n]=(0,a.useState)(""),[l,r]=(0,a.useState)([]),[c,o]=(0,a.useState)({start:null,end:null}),[u,h]=(0,a.useState)(!1),[p,g]=(0,a.useState)({adults:2,children:0,childAges:[],rooms:1}),[x,b]=(0,a.useState)(!1),f=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=new AbortController,t=setTimeout(async function(){if(!i||i.length<2){r([]);return}try{var t,s,a;let n=await fetch("/api/ai/groq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:"Выдавай до 6 кратких подсказок гео по Камчатке: города, районы, ориентиры. Формат: label | type(city|region|poi). Только по Камчатскому краю."},{role:"user",content:"подсказки: ".concat(i)}],max_tokens:200,temperature:.2}),signal:e.signal}),l=await n.json(),c=(null==l?void 0:null===(a=l.choices)||void 0===a?void 0:null===(s=a[0])||void 0===s?void 0:null===(t=s.message)||void 0===t?void 0:t.content)||"",o=String(c).split("\n").map(e=>e.trim()).filter(Boolean).slice(0,6).map((e,t)=>{let[i,s]=e.split("|").map(e=>e.trim());return{id:"s".concat(t),label:i||e,type:s||"poi"}});r(o)}catch(e){}},200);return()=>{clearTimeout(t),e.abort()}},[i]),(0,s.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-2 grid sm:grid-cols-[2fr_1.5fr_1.5fr_1fr_auto] gap-2 items-center",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{value:i,onChange:e=>n(e.target.value),placeholder:"Куда вы едете?",className:"h-11 rounded-xl px-3 text-slate-900 w-full"}),!!l.length&&(0,s.jsx)("div",{className:"absolute z-40 mt-1 rounded-xl border border-white/10 bg-premium-black w-full p-1",children:l.map(e=>(0,s.jsx)("button",{onClick:()=>{n(e.label),r([])},className:"w-full text-left px-3 py-2 rounded-lg hover:bg-white/10 text-sm",children:e.label},e.id))})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{ref:f,onClick:()=>h(e=>!e),className:"h-11 rounded-xl px-3 text-slate-900 w-full text-left",children:[c.start?c.start.toLocaleDateString("ru-RU"):"Дата заезда"," — ",c.end?c.end.toLocaleDateString("ru-RU"):"Дата выезда"]}),u&&(0,s.jsx)("div",{className:"absolute top-[3.2rem] left-0",children:(0,s.jsx)(d,{value:c,onChange:o,onClose:()=>h(!1),anchorRef:f})})]}),(0,s.jsx)(m,{value:p,onChange:g}),(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm text-white/80 px-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:x,onChange:e=>b(e.target.checked)})," Для работы"]}),(0,s.jsx)("button",{onClick:()=>t({location:i,range:c,guests:p,work:x}),className:"h-11 rounded-xl px-4 bg-premium-gold text-premium-black font-bold",children:"Найти"})]})}let h=["Отель","Гостевой дом","Апартаменты","Турбаза","Хостел","Частный дом","Вилла"],p=["Бесплатный Wi‑Fi","Парковка","Завтрак","Термальный бассейн","Спа‑услуги","Трансфер"],g=["Петропавловск‑Камчатский","Елизово","Паратунка","Мильково","р. Камчатка"];function x(e){let{value:t,onChange:i,onApply:a}=e,n=e=>i({...t,...e}),l=(e,i)=>{let s=new Set(t[e]);s.has(i)?s.delete(i):s.add(i),n({[e]:Array.from(s)})};return(0,s.jsxs)("aside",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 grid gap-4",children:[(0,s.jsx)("div",{className:"text-lg font-extrabold",children:"Фильтровать результаты"}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("div",{className:"text-sm text-white/70",children:"Цена за ночь (руб.)"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"number",className:"h-10 rounded-lg px-3 text-slate-900 w-28",value:t.priceMin,onChange:e=>n({priceMin:Number(e.target.value)||0})}),(0,s.jsx)("span",{className:"text-white/60",children:"—"}),(0,s.jsx)("input",{type:"number",className:"h-10 rounded-lg px-3 text-slate-900 w-28",value:t.priceMax,onChange:e=>n({priceMax:Number(e.target.value)||0})})]}),(0,s.jsxs)("div",{className:"px-1",children:[(0,s.jsx)("input",{type:"range",min:0,max:3e4,step:500,value:t.priceMin,onChange:e=>n({priceMin:Number(e.target.value)}),className:"w-full"}),(0,s.jsx)("input",{type:"range",min:0,max:3e4,step:500,value:t.priceMax,onChange:e=>n({priceMax:Number(e.target.value)}),className:"w-full -mt-2"})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("div",{className:"text-sm text-white/70",children:"Рейтинг гостей"}),[4.5,4,3.5,3].map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.minRating===e,onChange:()=>n({minRating:t.minRating===e?null:e})})," ",e.toFixed(1),"+"]},e))]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("div",{className:"text-sm text-white/70",children:"Категория (звёзды)"}),[5,4,3,2].map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.minStars===e,onChange:()=>n({minStars:t.minStars===e?null:e})})," ",e,"★ и выше"]},e))]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("div",{className:"text-sm text-white/70",children:"Тип жилья"}),h.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.types.includes(e),onChange:()=>l("types",e)})," ",e]},e))]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("div",{className:"text-sm text-white/70",children:"Удобства"}),[...p,"Размещение с животными"].map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.amenities.includes(e),onChange:()=>l("amenities",e)})," ",e]},e))]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("div",{className:"text-sm text-white/70",children:"Район Камчатки"}),(0,s.jsxs)("select",{value:t.region||"",onChange:e=>n({region:e.target.value||null}),className:"h-10 rounded-lg px-3 bg-white/10 border border-white/10",children:[(0,s.jsx)("option",{value:"",children:"Любой"}),g.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("div",{className:"text-sm text-white/70",children:"Расстояние до центра (км)"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"range",min:1,max:50,step:1,value:t.maxDistanceKm,onChange:e=>n({maxDistanceKm:Number(e.target.value)}),className:"w-full"}),(0,s.jsx)("div",{className:"w-12 text-right text-sm",children:t.maxDistanceKm})]})]}),(0,s.jsx)("button",{onClick:a,className:"h-11 rounded-xl bg-premium-gold text-premium-black font-bold",children:"Применить фильтры"})]})}var b=i(7648);function f(e){let{name:t}=e;return(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs bg-white/10 px-2 py-1 rounded-full",children:[{"Бесплатный Wi‑Fi":"\uD83D\uDCF6",Парковка:"\uD83C\uDD7F️",Завтрак:"\uD83E\uDD50","Термальный бассейн":"♨️","Спа‑услуги":"\uD83D\uDC86",Трансфер:"\uD83D\uDE8C","Размещение с животными":"\uD83D\uDC3E"}[t]||"•",(0,s.jsx)("span",{className:"hidden sm:inline",children:t})]})}function v(e){let{item:t}=e,i=(0,a.useMemo)(()=>t.images&&t.images.length?t.images:[t.img],[t]),[n,l]=(0,a.useState)(0);return(0,s.jsx)("article",{className:"rounded-2xl border border-white/10 bg-white/5 overflow-hidden hover:border-premium-gold/50 transition",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-[240px_1fr]",children:[(0,s.jsxs)("div",{className:"relative w-full h-48 sm:h-44 overflow-hidden",children:[(0,s.jsx)("img",{src:i[n],alt:t.title,className:"w-full h-full object-cover",loading:"lazy"}),i.length>1&&(0,s.jsxs)("div",{className:"absolute inset-0 flex items-center justify-between p-2",children:[(0,s.jsx)("button",{onClick:()=>l(e=>(e-1+i.length)%i.length),className:"h-8 w-8 rounded-full bg-black/50 text-white grid place-items-center",children:"‹"}),(0,s.jsx)("button",{onClick:()=>l(e=>(e+1)%i.length),className:"h-8 w-8 rounded-full bg-black/50 text-white grid place-items-center",children:"›"})]}),i.length>1&&(0,s.jsx)("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1",children:i.map((e,t)=>(0,s.jsx)("span",{className:"h-1.5 w-1.5 rounded-full ".concat(t===n?"bg-premium-gold":"bg-white/50")},t))})]}),(0,s.jsxs)("div",{className:"p-4 grid gap-2",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-extrabold text-lg",children:t.title}),(0,s.jsx)("div",{className:"text-white/70 text-sm",children:t.location}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-1",children:[t.type&&(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-white/10 border border-white/10",children:t.type}),"number"==typeof t.stars&&(0,s.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-white/10 border border-white/10",children:[t.stars,"★"]})]})]}),(0,s.jsxs)("div",{className:"rounded-xl bg-black/60 border border-white/10 px-3 py-2 text-center",children:[(0,s.jsx)("div",{className:"text-xl font-black text-premium-gold",children:t.rating.toFixed(1)}),(0,s.jsx)("div",{className:"text-xs text-white/70",children:t.reviews?"".concat(t.reviews," отзывов"):"—"})]})]}),t.summary&&(0,s.jsx)("div",{className:"text-sm text-white/80",children:t.summary}),!!(t.amenities&&t.amenities.length)&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2 pt-1",children:(t.amenities||[]).slice(0,4).map(e=>(0,s.jsx)(f,{name:e},e))}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,s.jsxs)("div",{className:"text-white/85",children:[(0,s.jsx)("span",{className:"text-2xl font-black text-premium-gold",children:t.priceFrom.toLocaleString("ru-RU")})," ₽ / ночь"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(b.default,{href:"/hub/stay/".concat(t.id),className:"px-4 py-2 rounded-lg bg-white/10 hover:bg-white/15 font-semibold",children:"Подробнее"}),(0,s.jsx)(b.default,{href:"/hub/stay/".concat(t.id),className:"px-4 py-2 rounded-lg bg-orange-300 text-premium-black font-semibold",children:"Забронировать"})]})]})]})]})})}var w=i(2398);function j(){var e,t;let[i,n]=(0,a.useState)("tourist"),[l,r]=(0,a.useState)(""),[c,o]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),[g,b]=(0,a.useState)("pop"),[f,j]=(0,a.useState)(!1),[N,y]=(0,a.useState)({priceMin:0,priceMax:3e4,types:[],minRating:null,minStars:null,amenities:[],region:null,maxDistanceKm:50}),[k,C]=(0,a.useState)(!1),S=(0,a.useRef)(null),D=(0,a.useMemo)(()=>{let e=0;return(N.priceMin>0||N.priceMax<3e4)&&e++,N.region&&e++,e+=N.types.length,N.minStars&&e++,N.minRating&&e++,e+=N.amenities.length},[N]);(0,a.useEffect)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("q")||"",i=e.get("price_min"),s=e.get("price_max"),a=e.get("region")||e.get("district"),n=e.getAll("type"),l=e.get("rating"),c=e.get("stars"),d=e.getAll("amenity"),m=e.get("sort")||"pop";r(t),o(i?Number(i):""),p(s?Number(s):""),b(["pop","price_asc","price_desc","rating"].includes(m)?m:"pop"),y(e=>({...e,region:a||null,types:n.length?n:[],minRating:l?Number(l):null,minStars:c?Number(c):null,amenities:d.length?d:[],priceMin:i?Number(i):0,priceMax:s?Number(s):3e4}))},[]),(0,a.useEffect)(()=>(S.current&&clearTimeout(S.current),C(!0),S.current=setTimeout(()=>{let e=new URLSearchParams;l&&e.set("q",l),""!==c&&Number(c)>0&&e.set("price_min",String(c)),""!==h&&1e6>Number(h)&&e.set("price_max",String(h)),N.priceMin>0&&e.set("price_min",String(N.priceMin)),N.priceMax<3e4&&e.set("price_max",String(N.priceMax)),N.region&&e.set("region",String(N.region)),N.types.forEach(t=>e.append("type",t)),N.minRating&&e.set("rating",String(N.minRating)),N.minStars&&e.set("stars",String(N.minStars)),N.amenities.forEach(t=>e.append("amenity",t)),g&&"pop"!==g&&e.set("sort",g);let t=e.toString()?"/hub/stay?".concat(e.toString()):"/hub/stay";{let e="".concat(window.location.origin).concat(t);window.history.pushState({},"",e)}C(!1)},300),()=>{S.current&&clearTimeout(S.current)}),[l,c,h,N,g]);let M=(0,a.useMemo)(()=>w.j.filter(e=>!(!(!l||"".concat(e.name," ").concat(e.location," ").concat(e.amenities.join(" ")).toLowerCase().includes(l.toLowerCase()))||""!==c&&e.price<Number(c)||""!==h&&e.price>Number(h))&&(!N.priceMin||!(e.price<N.priceMin))&&(!N.priceMax||!(e.price>N.priceMax))&&(!N.region||e.location===N.region)&&(!N.types||!(N.types.length>0)||!!N.types.includes(e.type))&&(!N.minStars||!((e.stars||0)<N.minStars))&&(!N.minRating||!(e.rating<N.minRating))&&(!N.amenities||!(N.amenities.length>0)||!!N.amenities.every(t=>e.amenities.includes(t)))).map(e=>({id:e.id,title:e.name,location:e.location,rating:e.rating,priceFrom:e.price,img:e.images[0],tags:e.amenities.slice(0,3)})).sort((e,t)=>"price_asc"===g?e.priceFrom-t.priceFrom:"price_desc"===g?t.priceFrom-e.priceFrom:"rating"===g?t.rating-e.rating:0),[l,c,h,N,g]),[R,F]=(0,a.useState)(!1),[_,E]=(0,a.useState)({start:null,end:null}),[q,L]=(0,a.useState)({adults:2,children:0,childAges:[],rooms:1});return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("main",{className:"min-h-screen bg-premium-black text-white px-6 py-8 grid place-items-center",children:(0,s.jsx)("div",{className:"text-white/70",children:"Загрузка…"})}),children:(0,s.jsxs)("main",{className:"min-h-screen bg-premium-black text-white px-6 py-8 grid gap-6",children:[(0,s.jsxs)("header",{className:"flex items-center justify-between gap-3 flex-wrap",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("a",{href:"/",className:"px-3 py-1.5 rounded-lg bg-white/10 hover:bg-white/15 text-sm",children:"← На главную"}),(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-extrabold",children:"Размещение"})]}),(0,s.jsx)("div",{className:"flex gap-2 bg-white/5 border border-white/10 rounded-full p-1",children:["tourist","operator"].map(e=>(0,s.jsx)("button",{onClick:()=>n(e),className:"px-3 py-1.5 rounded-full text-sm ".concat(i===e?"bg-premium-gold text-premium-black":"hover:bg-white/10"),children:"tourist"===e?"Турист":"Туроператор"},e))})]}),(0,s.jsxs)("section",{className:"relative overflow-hidden rounded-3xl",children:[(0,s.jsx)("img",{src:"https://images.unsplash.com/photo-1505691938895-1758d7feb511?q=80&w=1920&auto=format&fit=crop",alt:"Hero",className:"w-full h-[32vh] object-cover"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"}),(0,s.jsxs)("div",{className:"absolute inset-0 p-6 grid content-end gap-3",children:[(0,s.jsx)("div",{className:"text-2xl font-extrabold",children:"Найдите идеальное место для отдыха на Камчатке"}),(0,s.jsx)("div",{className:"text-white/85",children:"От уютных гостевых домов до современных отелей — с лучшей ценой."}),(0,s.jsx)(u,{onSearch:()=>{}})]})]}),(0,s.jsxs)("section",{className:"grid gap-3 relative",children:[(0,s.jsxs)("div",{className:"grid sm:grid-cols-5 gap-3",children:[(0,s.jsx)("input",{value:l,onChange:e=>r(e.target.value),placeholder:"Куда: база, район…",className:"h-11 rounded-xl px-3 text-slate-900 sm:col-span-2"}),(0,s.jsxs)("button",{onClick:()=>F(e=>!e),className:"h-11 rounded-xl px-3 text-slate-900 text-left relative ring-1 ring-premium-gold/60 focus:ring-2 focus:ring-premium-gold",id:"date-anchor",children:[_.start?_.start.toLocaleDateString("ru-RU"):"Дата заезда"," — ",_.end?_.end.toLocaleDateString("ru-RU"):"Дата выезда"]}),(0,s.jsx)(m,{value:q,onChange:L,className:"ring-1 ring-premium-gold/60 focus:ring-2 focus:ring-premium-gold"})]}),R&&(0,s.jsx)(d,{value:_,onChange:E,onClose:()=>F(!1),anchorRef:{current:(null===(t=document)||void 0===t?void 0:null===(e=t.getElementById)||void 0===e?void 0:e.call(t,"date-anchor"))||null}}),(0,s.jsxs)("div",{className:"grid sm:grid-cols-3 gap-3",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsx)("input",{type:"number",value:c,onChange:e=>o(""===e.target.value?"":Number(e.target.value)),placeholder:"Мин ₽/ночь",className:"h-11 rounded-xl px-3 text-slate-900"}),(0,s.jsx)("input",{type:"number",value:h,onChange:e=>p(""===e.target.value?"":Number(e.target.value)),placeholder:"Макс ₽/ночь",className:"h-11 rounded-xl px-3 text-slate-900"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm overflow-x-auto no-scrollbar sm:col-span-2",children:[["баня","река","рыбалка","пансион","вид на вулканы","семейный","центр","трансфер"].map(e=>(0,s.jsx)("button",{onClick:()=>r(t=>t?t+" "+e:e),className:"px-3 py-2 rounded-full bg-white/10 hover:bg-white/15 whitespace-nowrap",children:e},e)),(0,s.jsxs)("select",{value:g,onChange:e=>b(e.target.value),className:"h-10 rounded-xl px-3 bg-white/10 border border-white/10",children:[(0,s.jsx)("option",{value:"pop",children:"Сортировка: по популярности"}),(0,s.jsx)("option",{value:"price_asc",children:"Сортировка: цена ↑"}),(0,s.jsx)("option",{value:"price_desc",children:"Сортировка: цена ↓"}),(0,s.jsx)("option",{value:"rating",children:"Сортировка: рейтинг"})]})]})]})]}),(0,s.jsxs)("section",{className:"grid gap-4 sm:grid-cols-[280px_1fr]",children:[(0,s.jsx)("div",{className:"hidden sm:block",children:(0,s.jsx)(x,{value:N,onChange:y,onApply:()=>{}})}),(0,s.jsxs)("div",{className:"grid gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("div",{className:"text-white/70",children:["Найдено вариантов: ",M.length]}),(0,s.jsxs)("select",{className:"h-10 rounded-xl px-3 bg-white/10 border border-white/10",children:[(0,s.jsx)("option",{children:"Рекомендуемые"}),(0,s.jsx)("option",{children:"Цена: низкая → высокая"}),(0,s.jsx)("option",{children:"Цена: высокая → низкая"}),(0,s.jsx)("option",{children:"Рейтинг"})]})]}),(0,s.jsx)("div",{className:"sm:hidden",children:(0,s.jsxs)("button",{onClick:()=>j(!0),className:"w-full h-11 rounded-xl bg-premium-gold text-premium-black font-bold",children:["Фильтры",D>0?" (".concat(D,")"):""]})}),k&&(0,s.jsx)("div",{className:"grid gap-3 animate-pulse",children:Array.from({length:4}).map((e,t)=>(0,s.jsx)("div",{className:"h-40 rounded-2xl bg-white/5 border border-white/10"},t))}),!k&&(0,s.jsxs)("div",{className:"grid gap-3",children:[M.map(e=>{let t=w.j.find(t=>t.id===e.id);return(0,s.jsx)(v,{item:{id:e.id,title:e.title,location:e.location,rating:e.rating,priceFrom:e.priceFrom,img:e.img,reviews:(null==t?void 0:t.reviews)||0,summary:(null==t?void 0:t.description.slice(0,120))+"…",stars:null==t?void 0:t.stars,images:null==t?void 0:t.images,type:null==t?void 0:t.type,amenities:null==t?void 0:t.amenities}},e.id)}),0===M.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-3",children:"\uD83C\uDFD4️"}),(0,s.jsx)("div",{className:"text-xl font-extrabold mb-1",children:"Подходящих вариантов не найдено"}),(0,s.jsx)("div",{className:"text-white/70 mb-3",children:"Измените параметры или сбросьте фильтры"}),(0,s.jsx)("button",{onClick:()=>{r(""),o(""),p(""),y({priceMin:0,priceMax:3e4,types:[],minRating:null,minStars:null,amenities:[],region:null,maxDistanceKm:50})},className:"h-11 px-5 rounded-xl bg-white/10 hover:bg-white/15",children:"Сбросить фильтры"})]})]})]})]}),f&&(0,s.jsxs)("div",{className:"fixed inset-0 z-50 sm:hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60",onClick:()=>j(!1)}),(0,s.jsxs)("div",{className:"absolute right-0 top-0 h-full w-[88%] max-w-[360px] bg-premium-black border-l border-white/10 p-4 overflow-y-auto transition-transform duration-300 translate-x-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"text-lg font-extrabold",children:["Фильтры",D>0?" (".concat(D,")"):""]}),(0,s.jsx)("button",{onClick:()=>j(!1),className:"h-8 w-8 rounded-lg bg-white/10",children:"✕"})]}),(0,s.jsx)(x,{value:N,onChange:y,onApply:()=>j(!1)}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[(0,s.jsx)("button",{onClick:()=>{y({priceMin:0,priceMax:3e4,types:[],minRating:null,minStars:null,amenities:[],region:null,maxDistanceKm:50})},className:"h-11 rounded-xl bg-white/10",children:"Сбросить"}),(0,s.jsx)("button",{onClick:()=>j(!1),className:"h-11 rounded-xl bg-premium-gold text-premium-black font-bold",children:"Показать"})]})]})]})]})})}w.j.map(e=>({id:e.id,title:e.name,location:e.location,rating:e.rating,priceFrom:e.price,img:e.images[0],tags:e.amenities.slice(0,3)}))}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=5579)}),_N_E=e.O()}]);