<!doctype html><html lang="ru"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Заявка</title><style>body{margin:0;font-family:system-ui;background:#f8fafc;color:#0f172a}.wrap{padding:16px}.input{width:100%;padding:10px;border:1px solid #e2e8f0;border-radius:10px;margin-bottom:10px;background:#fff}.btn{display:inline-block;background:#0891b2;color:#fff;padding:10px 12px;border-radius:10px;text-decoration:none}</style></head><body><div class="wrap"><h1>Заявка</h1><form id="f"><input class="input" name="name" placeholder="Ваше имя" required/><input class="input" name="contact" placeholder="Контакт (телеграм/email)" required/><textarea class="input" name="msg" placeholder="Комментарий"></textarea><button class="btn" type="submit">Отправить</button></form><div id="ok" style="display:none">Заявка отправлена</div></div><script>document.getElementById('f').addEventListener('submit',async(e)=>{e.preventDefault();const fd=new FormData(e.target);const body={name:fd.get('name'),contact:fd.get('contact'),payload:{msg:fd.get('msg'),tour_id:new URLSearchParams(location.search).get('tour_id')}};const r=await fetch('/api/tg/lead',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});if(r.ok){document.getElementById('ok').style.display='block';e.target.style.display='none';}else{alert('Ошибка отправки')}});</script></body></html>
