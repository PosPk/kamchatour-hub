"use strict";(()=>{var e={};e.id=65,e.ids=[65],e.modules={1841:e=>{e.exports=require("@aws-sdk/client-s3")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},928:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>m,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{POST:()=>u,dynamic:()=>p});var a=r(3278),n=r(5002),o=r(4877),i=r(1841);let p="force-dynamic";async function u(e){try{let t=await e.formData(),r=String(t.get("key")||""),s=t.get("file");if(!r||!s)return new Response(JSON.stringify({ok:!1,error:"missing_key_or_file"}),{status:400});let a=process.env.YC_BUCKET,n=process.env.YC_REGION||"ru-central1",o=process.env.AWS_ACCESS_KEY_ID,p=process.env.AWS_SECRET_ACCESS_KEY;if(!a||!o||!p)return new Response(JSON.stringify({ok:!1,error:"missing_s3_env"}),{status:500});let u=new i.S3Client({region:n,credentials:{accessKeyId:o,secretAccessKey:p},endpoint:"https://storage.yandexcloud.net",forcePathStyle:!1}),c=await s.arrayBuffer(),d=s.type||"application/octet-stream";return await u.send(new i.PutObjectCommand({Bucket:a,Key:r,Body:Buffer.from(c),ContentType:d})),new Response(JSON.stringify({ok:!0,key:r}),{status:200,headers:{"content-type":"application/json"}})}catch(e){return new Response(JSON.stringify({ok:!1,error:String(e)}),{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/assets/upload/route",pathname:"/api/assets/upload",filename:"route",bundlePath:"app/api/assets/upload/route"},resolvedPagePath:"/workspace/operator-web/src/app/api/assets/upload/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:f}=c,y="/api/assets/upload/route";function m(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:l})}},3278:(e,t,r)=>{e.exports=r(517)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[379],()=>r(928));module.exports=s})();